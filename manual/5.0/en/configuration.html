<!DOCTYPE html>
<html lang="en">
<head>
  <title>PHPBU Manual &#8211; Chapter 2. Configuration</title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="canonical" href="http://phpbu.de/manual/current/en/configuration.html">
  <link href="css/bootstrap.min.css" rel="stylesheet">
  <link href="css/highlight.min.css" rel="stylesheet">
  <link href="css/phpbu.css" rel="stylesheet">
  <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
 </head>
 <body>

  <nav class="navbar navbar-inverse navbar-static-top" role="navigation">
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed"
                data-toggle="collapse" data-target="#navbar" aria-expanded="false"
                aria-controls="navbar">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="/">
          <svg xmlns="http://www.w3.org/2000/svg"height="25" title="phpbu - php backup utility"
               viewBox="0 43 140 40">
            <path d="M31.8 43C31.2 43 30.7 43.2 30.3 43.6 30 44 29.8 44.5 29.8 45.1L29.8 72.4C29.8 72.9
                  30 73.4 30.3 73.8 30.8 74.2 31.2 74.4 31.8 74.4 32.4 74.4 32.9 74.2 33.3 73.8 33.7
                  73.4 33.9 72.9 33.9 72.4L33.9 62.7C33.9
                  61.9 34 61.1 34.3 60.3 34.7 59.6 35.1 58.9 35.7 58.4 36.2 57.8 36.9 57.4 37.6 57.1 38.4
                  56.7 39.1 56.6 40 56.6 40.8 56.6 41.6 56.7 42.4 57.1 43.1 57.4 43.8 57.8 44.3 58.4
                  44.9 58.9 45.3 59.6 45.7
                  60.3 46 61.1 46.2 61.9 46.2 62.7L46.2 72.4C46.2 72.9 46.4 73.4 46.7 73.8 47.2 74.2 47.6
                  74.4 48.2 74.4 48.8 74.4 49.2 74.2 49.6 73.8 50 73.4 50.2 72.9 50.3 72.4L50.3
                  62.7C50.3 61.3 50 60 49.4 58.7 48.9 57.5 48.1
                  56.4 47.2 55.5 46.3 54.5 45.2 53.8 43.9 53.3 42.7 52.7 41.4 52.5 40 52.5 37.6 52.5 35.6
                  53.1 33.9 54.5L33.9 45.1C33.8 44.5 33.6 44 33.2 43.6 32.8 43.2 32.4
                  43 31.8 43L31.8 43zM80.6 43C80 43 79.5 43.2 79.1 43.6 78.8 44 78.6 44.5 78.6 45L78.6
                  63.4C78.6 64.9 78.8 66.2 79.3 67.5L80.3 63.7 82.8 64.8C82.7 64.4 82.7 63.9 82.7 63.4
                  82.7 62.5 82.8 61.6 83.2 60.8 83.6 59.9 84
                  59.2 84.7 58.6 85.3 58 86 57.5 86.8 57.1 87.7 56.7 88.6 56.5 89.6 56.5 90.5 56.5 91.4
                  56.7 92.2 57.1 92.9 57.4 93.4 57.7 93.9 58.1L91.2 59.7 95 61.1 98.9 62.5 99.7 58.4 100.5
                  54.4 97.7 56C97.6
                  55.9 97.4 55.8 97.3 55.7 95.2 53.5 92.6 52.4 89.6 52.4
                  86.9 52.4 84.6 53.3 82.7 54.9L82.7 45.1C82.7 44.5 82.5 44 82.1 43.6 81.7 43.2 81.2 43
                  80.6 43L80.6 43zM15.7 52.4L15.7 52.4C12.7 52.4 10.1 53.5 7.9 55.6 6.2 57.4 5.2 59.4 4.8
                  61.8L1.7 61.8 1.7 61.8 1.6 61.8 4.3 64.9
                  7 68.1 9.7 64.9 12.4 61.8 12.3 61.8 12.4 61.8 9 61.8C9.1 61.4 9.2 61.1 9.3 60.8 9.7
                  59.9 10.2 59.2 10.8 58.6 11.4 57.9 12.1 57.4 13 57.1
                  13.8 56.7 14.7 56.5 15.7 56.5 16.6 56.5 17.5 56.7 18.4
                  57.1 19.2 57.4 19.9 57.9 20.6 58.6 21.2 59.2 21.7 59.9 22 60.8 22.4 61.6 22.6 62.5 22.6
                  63.4 22.6 64.4 22.4 65.2 22 66.1 21.7 66.9 21.2 67.6 20.6 68.3 19.9 68.9 19.2 69.4 18.4
                  69.8 17.5 70.1 16.6 70.3 15.7 70.3 14.7 70.3 13.8 70.1 13 69.8 12.1 69.4 11.4 68.9 10.8
                  68.3 10.3 67.7 9.8 67.1 9.5 66.4L7 69.3 4.7 66.5 4.7
                  81.8C4.7 82.4 4.9 82.8 5.3 83.2 5.7 83.6 6.1 83.8
                  6.7 83.8 7.3 83.8 7.8 83.6 8.2 83.2 8.6 82.8 8.8 82.4 8.8 81.8L8.8 72C10.7 73.6 13 74.4
                  15.7 74.4 17.2 74.4 18.6 74.1 19.9 73.6 21.2 73.1 22.3 72.2 23.4 71.2 25.6 69 26.7 66.5
                  26.7 63.4 26.7 61.9 26.4 60.5 25.9
                  59.2 25.3 57.9 24.5 56.7 23.5 55.6 21.3 53.5 18.7 52.4 15.7 52.4zM64.5 52.4C61.5 52.4
                  58.9 53.5 56.7 55.6 54.6 57.8 53.5 60.4 53.5 63.4L53.5 81.8C53.5 82.4 53.7 82.9 54.1 83.3
                  54.5 83.7 55 83.8 55.5 83.8 56.1 83.8
                  56.6 83.7 57 83.3 57.4 82.9 57.6 82.4 57.6 81.8L57.6 72C59.6 73.6 61.9 74.4 64.5 74.4
                  66 74.4 67.4 74.2 68.7 73.6 70 73.1 71.2 72.3 72.3 71.2 74.4 69.1 75.5 66.5 75.5 63.4
                  75.5 61.9 75.2 60.5 74.7
                  59.2 74.1 57.9 73.3 56.7 72.3 55.7 70.1 53.5 67.5 52.4 64.5 52.4L64.5 52.4zM105.8
                  52.4C105.2 52.4 104.7 52.6 104.3 53 103.9 53.4 103.7 53.9 103.7 54.5L103.7 64.2C103.7
                  65.6 104 66.9 104.5 68.1 105.1 69.4 105.8 70.5
                  106.8 71.4 107.7 72.3 108.8 73.1 110 73.6 111.3 74.1 112.6 74.4 114 74.4 115.2 74.4
                  116.3 74.3 117.3 73.9 118.3 73.6 119.2 73.1 120.1 72.4 120.2 73
                  120.4 73.4 120.7 73.8 121.1 74.2 121.6 74.4 122.2 74.4 122.8 74.4 123.2 74.2 123.6
                  73.8 124 73.4 124.2 72.9 124.2 72.4L124.2 54.5C124.2 53.9 124 53.4 123.6 53 123.2 52.6
                  122.8 52.4 122.2 52.4 121.6 52.4 121.1 52.6
                  120.7 53 120.3 53.4 120.1 53.9 120.1 54.5L120.1 64.2C120.1 65 120 65.8 119.7 66.6
                  119.3 67.3 118.9 68 118.3 68.5 117.8 69.1 117.1 69.5 116.4 69.9 115.6 70.2 114.8 70.3
                  114 70.3 113.1 70.3 112.3
                  70.2 111.6 69.9 110.8 69.5 110.2 69.1 109.6 68.5
                  109.1 68 108.6 67.3 108.3 66.6 108 65.8 107.8 65 107.8 64.2L107.8 54.5C107.8 53.9
                  107.6 53.4 107.2 53 106.8 52.6 106.4 52.4 105.8 52.4L105.8 52.4zM64.5 56.5C65.5 56.5
                  66.3 56.7 67.2 57.1 68 57.4 68.7 57.9 69.4 58.6
                  70 59.2 70.5 59.9 70.8 60.8 71.2 61.6 71.4 62.5 71.4 63.4 71.4 64.4 71.2 65.2 70.8
                  66.1 70.5 66.9 70 67.6 69.4 68.3 68.8 68.9 68 69.4 67.2 69.7 66.4 70.1 65.5 70.3 64.5
                  70.3 63.5 70.3 62.6 70.1
                  61.8 69.7 61 69.4 60.2 68.9 59.6 68.3 59 67.7 58.5 66.9 58.1 66.1 57.8 65.2 57.6
                  64.3 57.6 63.4 57.6 62.5 57.8 61.6 58.1 60.7 58.5 59.9 59 59.2 59.6 58.6 60.2 57.9
                  60.9 57.4 61.8 57.1 62.6 56.7 63.5 56.5 64.5 56.5zM15.2
                  57.1L15.2 57.1 15.2 63.6 15.2 63.7 20.6 67.4 21.2 66.5 16.2 63.2 16.2 57.1 15.2
                  57.1zM100.2 60.2L100.2 60.2C100.2 60.2 100.2 60.2 100.2 60.2L100.2
                  60.2zM100.2 60.2L99.6 63.4 96.4 62.3C96.5 62.7 96.5 63 96.5 63.4 96.5 64.4 96.4
                  65.2 96 66.1 95.6 66.9 95.2 67.6 94.5 68.3 93.9 68.9 93.2 69.4 92.3 69.8 91.5 70.1
                  90.6 70.3 89.7 70.3 88.7 70.3 87.8 70.1 86.9 69.8 86.6
                  69.6 86.2 69.4 85.9 69.2L88.4 68 84.6 66.4 80.9 64.7 79.8 68.7 78.8 72.7 81.9 71.2C81.9
                  71.2 81.9 71.2 81.9 71.2 84 73.3 86.6 74.4 89.7 74.4 92.7
                  74.4 95.3 73.3 97.4 71.2 99.6 69.1 100.6 66.5
                  100.6 63.4 100.6 62.3 100.5 61.2 100.2 60.2z"
                  fill="#fff"/>
          </svg>
        </a>
      </div>
      <div id="navbar" class="collapse navbar-collapse">
        <ul class="nav navbar-nav navbar-right">
          <li><a href="/">Home</a></li>
          <li><a href="/getting-started.html">Getting started</a></li>
          <li class="active"><a href="/documentation.html" class="active">Documentation</a></li>
          <li><a href="https://github.com/sebastianfeldmann/phpbu">GitHub</a></li>
        </ul>
        <ul class="nav navbar-nav navbar-left"><li class="dropdown">
  <a aria-expanded="false" role="button" data-toggle="dropdown" class="dropdown-toggle" href="#">Versions <span class="caret"></span></a>
  <ul role="menu" class="dropdown-menu">
<li class="dropdown-header">6.0 (stable)</li><li><a href="../../6.0/en/index.html"><span class="flag en"></span>English</a></li>
<li class="divider"></li>
<li class="dropdown-header">5.2 (old stable)</li><li><a href="../../5.2/en/index.html"><span class="flag en"></span>English</a></li>
<li class="divider"></li>
<li class="dropdown-header">5.1 (unsupported)</li><li><a href="../../5.1/en/index.html"><span class="flag en"></span>English</a></li>
<li class="divider"></li>
<li class="dropdown-header">5.0 (unsupported)</li><li class="active"><a href="../../5.0/en/index.html"><span class="flag en"></span>English</a></li>
<li class="divider"></li>
<li class="dropdown-header">4.0 (unsupported)</li><li><a href="../../4.0/en/index.html"><span class="flag en"></span>English</a></li>
<li class="divider"></li>
<li class="dropdown-header">3.2 (unsupported)</li><li><a href="../../3.2/en/index.html"><span class="flag en"></span>English</a></li>
<li class="divider"></li>
<li class="dropdown-header">3.1 (unsupported)</li><li><a href="../../3.1/en/index.html"><span class="flag en"></span>English</a></li>
<li class="divider"></li>
<li class="dropdown-header">3.0 (unsupported)</li><li><a href="../../3.0/en/index.html"><span class="flag en"></span>English</a></li>
<li class="divider"></li>
<li class="dropdown-header">2.1 (unsupported)</li><li><a href="../../2.1/en/index.html"><span class="flag en"></span>English</a></li>
  </ul>
</li>
</ul>
      </div>
    </div>
  </nav>

  <div class="container">
    <div class="row">
      <div class="col-md-3">
        <div class="doc-sidebar hidden-print">
          <dl class="toc nav hidden-print"><dt><span class="chapter"><a href="installation.html">1. Installing PHPBU</a></span></dt><dd><dl><dt><span class="section"><a href="installation.html#installation.requirements">Requirements</a></span></dt><dt><span class="section"><a href="installation.html#installation.phar">PHP Archive (PHAR)</a></span></dt><dt><span class="section"><a href="installation.html#installation.composer">Composer</a></span></dt><dt><span class="section"><a href="installation.html#installation.integrations">Framework integrations</a></span></dt></dl></dd><dt><span class="chapter"><a href="configuration.html" class="active">2. Configuration</a></span></dt><dd><dl><dt><span class="section"><a href="configuration.html#configuration.xml">XML-Configuration</a></span></dt><dd><dl><dt><span class="section"><a href="configuration.html#configuration.xml.elements">List of tags</a></span></dt></dl></dd><dt><span class="section"><a href="configuration.html#configuration.json">JSON-Configuration</a></span></dt><dt><span class="section"><a href="configuration.html#configuration.adapters">Adapters</a></span></dt><dt><span class="section"><a href="configuration.html#configuration.schedule">Schedule backups</a></span></dt></dl></dd><dt><span class="chapter"><a href="adapters.html">3. Configuration Adapters</a></span></dt><dd><dl><dt><span class="section"><a href="adapters.html#adapters.env">Environment adapter "env"</a></span></dt><dt><span class="section"><a href="adapters.html#adapters.dotenv">Dotenv adapter "dotenv"</a></span></dt><dt><span class="section"><a href="adapters.html#adapters.array">PHP config adapter "array"</a></span></dt></dl></dd><dt><span class="chapter"><a href="cli.html">4. The Command-Line-Runner</a></span></dt><dd><dl><dt><span class="section"><a href="cli.html#cli.options">Command-Line-Runner options</a></span></dt><dt><span class="section"><a href="cli.html#cli.simulation">Simulation</a></span></dt><dt><span class="section"><a href="cli.html#cli.limit">Limit</a></span></dt></dl></dd><dt><span class="chapter"><a href="source.html">5. Backup Sources</a></span></dt><dd><dl><dt><span class="section"><a href="source.html#source.arangodump">ArangoDB</a></span></dt><dt><span class="section"><a href="source.html#source.elasticdump">Elastic</a></span></dt><dt><span class="section"><a href="source.html#source.mongodump">MongoDB</a></span></dt><dt><span class="section"><a href="source.html#source.mysqldump">MySQL - mysqldump</a></span></dt><dt><span class="section"><a href="source.html#source.xtrabackup">MySQL - xtrabackup</a></span></dt><dt><span class="section"><a href="source.html#source.pgdump">pgdump</a></span></dt><dt><span class="section"><a href="source.html#source.redis">redis</a></span></dt><dt><span class="section"><a href="source.html#source.rsync">rsync</a></span></dt><dt><span class="section"><a href="source.html#source.tar">Directories</a></span></dt><dd><dl><dt><span class="section"><a href="source.html#source.tar.throttling">IO Throttling</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="check.html">6. Backup Validation</a></span></dt><dd><dl><dt><span class="section"><a href="check.html#check.sizemin">Minimal size</a></span></dt><dt><span class="section"><a href="check.html#check.sizediff">Compare to previous Backups</a></span></dt></dl></dd><dt><span class="chapter"><a href="crypt.html">7. Encryption</a></span></dt><dd><dl><dt><span class="section"><a href="crypt.html#crypt.mcrypt">mcrypt</a></span></dt><dt><span class="section"><a href="crypt.html#crypt.openssl">openssl</a></span></dt></dl></dd><dt><span class="chapter"><a href="sync.html">8. Sync Backups</a></span></dt><dd><dl><dt><span class="section"><a href="sync.html#sync.amazon">Amazon S3</a></span></dt><dt><span class="section"><a href="sync.html#sync.dropbox">Dropbox</a></span></dt><dt><span class="section"><a href="sync.html#sync.rsync">Rsync</a></span></dt><dt><span class="section"><a href="sync.html#sync.sftp">SFTP / FTP</a></span></dt><dt><span class="section"><a href="sync.html#sync.softlayer">Softlayer Object Storage</a></span></dt></dl></dd><dt><span class="chapter"><a href="cleanup.html">9. Cleanup backups</a></span></dt><dd><dl><dt><span class="section"><a href="cleanup.html#cleanup.capacity">Cleanup by capacity</a></span></dt><dt><span class="section"><a href="cleanup.html#cleanup.outdated">Cleanup by date</a></span></dt><dt><span class="section"><a href="cleanup.html#cleanup.quantity">Cleanup by quantity</a></span></dt><dt><span class="section"><a href="cleanup.html#cleanup.stepwise">Cleanup stepwise</a></span></dt></dl></dd><dt><span class="chapter"><a href="logging.html">10. Logging</a></span></dt><dd><dl><dt><span class="section"><a href="logging.html#logging.json">JSON</a></span></dt><dt><span class="section"><a href="logging.html#logging.email">E-Mail</a></span></dt><dt><span class="section"><a href="logging.html#logging.webhook">Webhook</a></span></dt></dl></dd><dt><span class="chapter"><a href="extending-phpbu.html">11. Extending PHPBU</a></span></dt><dd><dl><dt><span class="section"><a href="extending-phpbu.html#extending.simulation">Executing and simulating</a></span></dt><dt><span class="section"><a href="extending-phpbu.html#extending.source">Create a custom Source</a></span></dt><dt><span class="section"><a href="extending-phpbu.html#extending.check">Create a custom Check</a></span></dt><dt><span class="section"><a href="extending-phpbu.html#extending.sync">Create a custom Sync</a></span></dt><dt><span class="section"><a href="extending-phpbu.html#extending.cleaner">Create a custom Cleaner</a></span></dt><dt><span class="section"><a href="extending-phpbu.html#extending.adapter">Create a custom Adapter</a></span></dt><dt><span class="section"><a href="extending-phpbu.html#extending.logger">Create a custom Logger</a></span></dt><dt><span class="section"><a href="extending-phpbu.html#extending.summary">Summary</a></span></dt></dl></dd><dt><span class="chapter"><a href="integrations.html">12. Framework integrations</a></span></dt><dd><dl><dt><span class="section"><a href="integrations.html#integrations.laravel">Laravel</a></span></dt><dd><dl><dt><span class="section"><a href="integrations.html#integrations.laravel.installation">Installation</a></span></dt><dt><span class="section"><a href="integrations.html#integrations.laravel.configuration">Configuration</a></span></dt><dt><span class="section"><a href="integrations.html#integrations.laravel.usage">Usage</a></span></dt></dl></dd></dl></dd><dt><span class="appendix"><a href="appendixes.index.html">A. Index</a></span></dt><dd><dl><dt><span class="index"><a href="appendixes.index.html#appendixes.index.index"></a></span></dt></dl></dd><dt><span class="appendix"><a href="appendixes.copyright.html">B. Copyright</a></span></dt></dl>
        </div>
      </div>
      <div class="col-md-9">
        <div class="row">
          <div class="col-md-1 pull-left prev"><a accesskey="p" href="installation.html">Prev</a></div>
          <div class="col-md-1 pull-right next"><a accesskey="n" href="adapters.html">Next</a></div>
        </div>
        <div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="configuration"></a>Chapter 2. Configuration</h1></div></div></div><a id="id1399" class="indexterm"></a><p>
    To use PHPBU and create your backups you first have to create a configuration file.
  </p><p>
    The configuration of PHPBU is done with a simple XML file.
    You can validate your config files with the respective PHPBU schema definition found at
    <a class="ulink" href="http://schema.phpbu.de" target="_top">schema.phpbu.de</a>.
  </p><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="configuration.xml"></a>XML-Configuration</h2></div></div></div><a id="id1406" class="indexterm"></a><p>
      You should name your configuration file <code class="literal">phpbu.xml</code> or <code class="literal">phpbu.xml.dist</code>
      so you don't have to specify the path with the <code class="literal">--configuration</code> option.
    </p><p>
      The following skeleton is a good point to start and get into detail from here.
    </p><div class="example"><a id="id1414"></a><p class="title"><strong>Example 2.1: XML-Configuration</strong></p><div class="example-contents"><pre class="programlisting">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;phpbu xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:noNamespaceSchemaLocation="http://schema.phpbu.de/5.0/phpbu.xsd"&gt;
  &lt;backups&gt;
    &lt;backup name="MyDatabase"&gt;
      &lt;!-- backup source --&gt;
      &lt;source type="mysqldump"&gt;
        &lt;option name="databases" value="mydbname"/&gt;
        &lt;option name="user" value="user.name"/&gt;
        &lt;option name="password" value="topsecret"/&gt;
      &lt;/source&gt;
      &lt;!-- where should the backup be stored --&gt;
      &lt;target dirname="backup/mysql"
              filename="mysqldump-%Y%m%d-%H%i.sql"
              compress="bzip2"/&gt;
      &lt;!-- check the created backup --&gt;
      &lt;check type="SizeMin" value="10M"/&gt;
      &lt;!-- cleanup the backup location
           as soon as all created backups exceed 500MB
           remove oldest backups --&gt;
      &lt;cleanup type="Capacity"&gt;
        &lt;option name="size" value="500M"/&gt;
      &lt;/cleanup&gt;
    &lt;/backup&gt;
  &lt;/backups&gt;
&lt;/phpbu&gt;</pre></div></div><br class="example-break"></br><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="configuration.xml.elements"></a>List of tags</h3></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="configuration.xml.elements.phpbu"></a>&lt;phpbu&gt;</h4></div></div></div><p>
          The XML root element with at least xmlns:xsi and xsi:noNamespaceSchemaLocation.
        </p><div class="table"><a id="configuration.xml.elements.tables.phpbu"></a><p class="title"><strong>Table 2.1. &lt;phpbu&gt; attributes</strong></p><div class="table-contents"><table class="table table-striped" summary="&lt;phpbu&gt; attributes"><colgroup><col></col><col></col><col></col><col></col><col></col></colgroup><thead><tr><th align="left">Name</th><th align="left">Values</th><th align="left">Required</th><th align="left">Default</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left">bootstrap</td><td align="left">filename</td><td align="left">no</td><td align="left">null</td><td align="left">Include a php file to extend PHPBU</td></tr><tr><td align="left">verbose</td><td align="left">true | false</td><td align="left">no</td><td align="left">false</td><td align="left">Controls the output verbosity</td></tr><tr><td align="left">debug</td><td align="left">true | false</td><td align="left">no</td><td align="left">false</td><td align="left">Controls the debug output</td></tr></tbody></table></div></div><br class="table-break"></br></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="configuration.xml.elements.backup"></a>&lt;backup&gt;</h4></div></div></div><p>
          Configures a backup process.
          You can have as many of these as you need.
        </p><div class="table"><a id="configuration.xml.elements.tables.backup"></a><p class="title"><strong>Table 2.2. &lt;backup&gt; attributes</strong></p><div class="table-contents"><table class="table table-striped" summary="&lt;backup&gt; attributes"><colgroup><col></col><col></col><col></col><col></col><col></col></colgroup><thead><tr><th align="left">Name</th><th align="left">Values</th><th align="left">Required</th><th align="left">Default</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left">name</td><td align="left">string</td><td align="left">yes</td><td align="left">null</td><td align="left">A custom name for your backup used in the PHPBU output.</td></tr><tr><td align="left">stopOnError</td><td align="left">true | false</td><td align="left">no</td><td align="left">false</td><td align="left">Tells if the execution of phpbu will be stopped if this backup fails.</td></tr></tbody></table></div></div><br class="table-break"></br></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="configuration.xml.elements.source"></a>&lt;source&gt;</h4></div></div></div><p>
          Defines the data that is backed up.
        </p><div class="table"><a id="configuration.xml.elements.tables.source"></a><p class="title"><strong>Table 2.3. &lt;source&gt; attributes</strong></p><div class="table-contents"><table class="table table-striped" summary="&lt;source&gt; attributes"><colgroup><col></col><col></col><col></col><col></col><col></col></colgroup><thead><tr><th align="left">Name</th><th align="left">Values</th><th align="left">Required</th><th align="left">Default</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left">type</td><td align="left">string</td><td align="left">yes</td><td align="left">-</td><td align="left">Type of backup, <a class="xref" href="source.html" title="Chapter 5. Backup Sources">Chapter 5</a> has a list of all supported source types.</td></tr></tbody></table></div></div><br class="table-break"></br></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="configuration.xml.elements.target"></a>&lt;target&gt;</h4></div></div></div><p>
          Defines where the backup is stored.
        </p><div class="table"><a id="configuration.xml.elements.tables.target"></a><p class="title"><strong>Table 2.4. &lt;target&gt; attributes</strong></p><div class="table-contents"><table class="table table-striped" summary="&lt;target&gt; attributes"><colgroup><col></col><col></col><col></col><col></col><col></col></colgroup><thead><tr><th align="left">Name</th><th align="left">Values</th><th align="left">Required</th><th align="left">Default</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left">dirname</td><td align="left">string</td><td align="left">yes</td><td align="left">-</td><td align="left">Path to the directory where the backup is stored, absolute or relative to the config file.</td></tr><tr><td align="left">filename</td><td align="left">string</td><td align="left">yes</td><td align="left">-</td><td align="left">Filename of the stored backup.</td></tr><tr><td align="left">compress</td><td align="left">string</td><td align="left">no</td><td align="left">null</td><td align="left">Type of compressor to use to compress the backup.</td></tr></tbody></table></div></div><br class="table-break"></br></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="configuration.xml.elements.check"></a>&lt;check&gt;</h4></div></div></div><p>
          Specifies what kind of tests should be performed to validate the backup.
        </p><div class="table"><a id="configuration.xml.elements.tables.check"></a><p class="title"><strong>Table 2.5. &lt;check&gt; attributes</strong></p><div class="table-contents"><table class="table table-striped" summary="&lt;check&gt; attributes"><colgroup><col></col><col></col><col></col><col></col><col></col></colgroup><thead><tr><th align="left">Name</th><th align="left">Values</th><th align="left">Required</th><th align="left">Default</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left">type</td><td align="left">string</td><td align="left">yes</td><td align="left">-</td><td align="left">Type of check, <a class="xref" href="check.html" title="Chapter 6. Backup Validation">Chapter 6</a> has a list of all supported check types.</td></tr><tr><td align="left">value</td><td align="left">string</td><td align="left">yes</td><td align="left">-</td><td align="left">Value the backup is getting checked against.</td></tr></tbody></table></div></div><br class="table-break"></br></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="configuration.xml.elements.crypt"></a>&lt;crypt&gt;</h4></div></div></div><p>
          Specifies what kind of encryption should be used to encrypt the backup.
        </p><div class="table"><a id="configuration.xml.elements.tables.crypt"></a><p class="title"><strong>Table 2.6. &lt;crypt&gt; attributes</strong></p><div class="table-contents"><table class="table table-striped" summary="&lt;crypt&gt; attributes"><colgroup><col></col><col></col><col></col><col></col><col></col></colgroup><thead><tr><th align="left">Name</th><th align="left">Values</th><th align="left">Required</th><th align="left">Default</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left">type</td><td align="left">string</td><td align="left">yes</td><td align="left">-</td><td align="left">Type of encryption, <a class="xref" href="crypt.html" title="Chapter 7. Encryption">Chapter 7</a> has a list of all supported crypt types.</td></tr><tr><td align="left">skipOnFailure</td><td align="left">true | false</td><td align="left">no</td><td align="left">false</td><td align="left">You can still execute the encryption, even of some failure occurred.</td></tr></tbody></table></div></div><br class="table-break"></br></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="configuration.xml.elements.sync"></a>&lt;sync&gt;</h4></div></div></div><p>
          Copy the created backup to another location.
        </p><div class="table"><a id="configuration.xml.elements.tables.sync"></a><p class="title"><strong>Table 2.7. &lt;sync&gt; attributes</strong></p><div class="table-contents"><table class="table table-striped" summary="&lt;sync&gt; attributes"><colgroup><col></col><col></col><col></col><col></col><col></col></colgroup><thead><tr><th align="left">Name</th><th align="left">Values</th><th align="left">Required</th><th align="left">Default</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left">type</td><td align="left">string</td><td align="left">yes</td><td align="left">-</td><td align="left">Type of sync, <a class="xref" href="sync.html" title="Chapter 8. Sync Backups">Chapter 8</a> has a list of all supported sync types.</td></tr><tr><td align="left">skipOnFailure</td><td align="left">true | false</td><td align="left">no</td><td align="left">false</td><td align="left">You can still execute the sync, even of some failure occurred.</td></tr></tbody></table></div></div><br class="table-break"></br></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="configuration.xml.elements.cleanup"></a>&lt;cleanup&gt;</h4></div></div></div><p>
         Tells phpbu which files to delete after a successful backup.
        </p><div class="table"><a id="configuration.xml.elements.tables.cleanup"></a><p class="title"><strong>Table 2.8. &lt;cleanup&gt; attributes</strong></p><div class="table-contents"><table class="table table-striped" summary="&lt;cleanup&gt; attributes"><colgroup><col></col><col></col><col></col><col></col><col></col></colgroup><thead><tr><th align="left">Name</th><th align="left">Values</th><th align="left">Required</th><th align="left">Default</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left">type</td><td align="left">string</td><td align="left">yes</td><td align="left">-</td><td align="left">Type of cleanup, <a class="xref" href="cleanup.html" title="Chapter 9. Cleanup backups">Chapter 9</a> has a list of all supported cleanup types.</td></tr><tr><td align="left">skipOnFailure</td><td align="left">true | false</td><td align="left">no</td><td align="left">-</td><td align="left">You can still execute the cleanup, even of some failure occurred.</td></tr></tbody></table></div></div><br class="table-break"></br></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="configuration.xml.elements.option"></a>&lt;option&gt;</h4></div></div></div><p>
          A simple key value tag to configure &lt;source&gt;, &lt;crypt&gt;, &lt;sync&gt; and &lt;cleanup&gt;.
        </p><div class="table"><a id="configuration.xml.elements.tables.option"></a><p class="title"><strong>Table 2.9. &lt;option&gt; attributes</strong></p><div class="table-contents"><table class="table table-striped" summary="&lt;option&gt; attributes"><colgroup><col></col><col></col><col></col><col></col><col></col></colgroup><thead><tr><th align="left">Name</th><th align="left">Values</th><th align="left">Required</th><th align="left">Default</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left">name</td><td align="left">string</td><td align="left">yes</td><td align="left">-</td><td align="left">Option key.</td></tr><tr><td align="left">value</td><td align="left">string</td><td align="left">yes</td><td align="left">-</td><td align="left">Option value.</td></tr></tbody></table></div></div><br class="table-break"></br></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="configuration.json"></a>JSON-Configuration</h2></div></div></div><a id="id1665" class="indexterm"></a><p>
      This is roughly the same skeleton as shown above at the XML-Section.
    </p><div class="example"><a id="id1669"></a><p class="title"><strong>Example 2.2: JSON-Configuration</strong></p><div class="example-contents"><pre class="programlisting">
{
  "verbose": true,
  "logging": [
    {
      "type": "json",
      "target": "backup/json.log"
    }
  ],
  "backups": [
    {
      "name": "MyDatabase",
      "source": {
        "type": "mysqldump",
        "options": {
          "databases": "mydbname",
          "user": "user.name",
          "password": "topsecret"
        }
      },
      "target": {
        "dirname": "backup",
        "filename": "mysql-%Y%m%d-%H%i.sql",
        "compress": "bzip2"
      },
      "checks": [
        {
          "type": "sizemin",
          "value": "10M"
        }
      ],
      "syncs": [
        {
          "type": "sftp",
          "options": {
            "host": "backup.example.com",
            "user": "user.name",
            "password": "topsecret",
            "path": "backup/someName"
          }
        }
      ],
      "cleanup": {
        "type": "Capacity",
        "options": {
          "size": "200M"
        }
      }
    }
  ]
}</pre></div></div><br class="example-break"></br></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="configuration.adapters"></a>Adapters</h2></div></div></div><a id="id1673" class="indexterm"></a><p>
      Adapters are used to include configuration settings from other configuration sources.
    </p><p>
      So with adapters you don't have to put your passwords into your phpbu configuration file.
      Instead you can use environment variables or .env configuration files.
    </p><p>
      And this ist how it works:
      You add an adapter to your phpbu configuration like shown in the examples below.
      You have to choose a <code class="literal">type</code> and a <code class="literal">name</code>. The name is completely up to you, but you are not allowed
      to use colons.
      With this done you can now reference your configured adapter for any option value in your phpbu configuration like this.
    </p><p>
      <code class="literal">:adapter:my-chosen-adapter-name:path.to.value:</code>
    </p><p>
      The keyword <code class="literal">adapter</code> tells phpbu that this option value should be received from an adapter,
      followed by a <code class="literal">colon</code>, followed by your chosen <code class="literal">adapter name</code> so phpbu knows which adapter to use,
      followed by a <code class="literal">colon</code>, followed by the identifier for your value.
      The identifier could be the name of a environment variable or a "path" through an configuration array like this
      "db.mysql.username" completely depending on the adapter implementation.
    </p><p>
      You can use adapter values for whole configuration values, in that case you can skip the leading and trailing colons.
      If you want to use multiple adapter values in a single configuration value you have to use the leading and trailing colons.
    </p><div class="example"><a id="id1689"></a><p class="title"><strong>Example 2.3: Adapter examples</strong></p><div class="example-contents"><pre class="programlisting">
&lt;option name="singleValue" value="adapter:myAdp:foo"/&gt;
&lt;option name="multipleValues" value="/foo/:adapter:myAdp:dir:/bar/:adapter:myAdp:file:.zip"/&gt;</pre><pre class="programlisting">
{"singleValue": "adapter:myAdp:foo"}
{"multipleValues": "/foo/:adapter:myAdp:dir:/bar/:adapter:myAdp:file:.zip"}</pre></div></div><br class="example-break"></br><p>
      For a list of available adapters and a more detailed documentation check out the <a class="link" href="adapters.html" title="Chapter 3. Configuration Adapters">adapter section</a>.
    </p><div class="example"><a id="id1695"></a><p class="title"><strong>Example 2.4: XML-Configuration</strong></p><div class="example-contents"><pre class="programlisting">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;phpbu xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:noNamespaceSchemaLocation="http://schema.phpbu.de/5.0/phpbu.xsd"&gt;
  &lt;adapters&gt;
    &lt;adapter type="dotenv" name="environment"&gt;
      &lt;option name="file" value=".env"&gt;
    &lt;/adapter&gt;
  &lt;adapters&gt;
  &lt;backups&gt;
    &lt;backup&gt;
      &lt;!-- backup source --&gt;
      &lt;source type="mysqldump"&gt;
        &lt;option name="databases" value="mydbname"/&gt;
        &lt;option name="user" value="adapter:environment:DB_USER"/&gt;
        &lt;option name="password" value="adapter:environment:DB_PASSWORD"/&gt;
      &lt;/source&gt;
      &lt;!-- where should the backup be stored --&gt;
      &lt;target dirname="backup/mysql"
              filename="mysqldump-%Y%m%d-%H%i.sql"/&gt;
    &lt;/backup&gt;
  &lt;/backups&gt;
&lt;/phpbu&gt;</pre></div></div><br class="example-break"></br><div class="example"><a id="id1698"></a><p class="title"><strong>Example 2.5: JSON-Configuration</strong></p><div class="example-contents"><pre class="programlisting">
{
  "verbose": true,
  "adapters": [
    {
      "type": "dotenv",
      "name": "environment",
      "options": {
        "file": ".env"
      }
    }
  ],
  "backups": [
    {
      "source": {
        "type": "mysqldump",
        "options": {
          "databases": "mydbname",
          "user": "adapter:environment:DB_USER",
          "password": "adapter:environment:DB_PASSWORD"
        }
      },
      "target": {
        "dirname": "backup",
        "filename": "mysql-%Y%m%d-%H%i.sql"
      }
    }
  ]
}</pre></div></div><br class="example-break"></br></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="configuration.schedule"></a>Schedule backups</h2></div></div></div><a id="id1702" class="indexterm"></a><p>
      Scheduling your backups is not part of phpbu. Nevertheless here is an example how to do
      it with <a class="ulink" href="https://de.wikipedia.org/wiki/Cron" target="_top">Cron</a>. Adding one of the following lines
      to your crontab will execute your backup every morning at 3:10 AM.
    </p><div class="example"><a id="id1707"></a><p class="title"><strong>Example 2.6: Crontab example</strong></p><div class="example-contents"><pre class="programlisting"># +------------------------- min (0 - 59)
# |    +-------------------- hour (0 - 23)
# |    |    +--------------- day of month (1 - 31)
# |    |    |    +---------- month (1 - 12)
# |    |    |    |    +----- day of week (0 - 7) (Sunday=0 or 7)
# |    |    |    |    |
# *    *    *    *    *

# this requires phpbu to be in the cron users path
10     3    *    *    * phpbu --configuration=/var/www/my-backup/phpbu.xml

# alternatively you can specify the full path
#10     3    *    *    * /home/user/bin/phpbu.phar --configuration=/var/www/my-backup/phpbu.xml
        </pre></div></div><br class="example-break"></br></div></div>
        <div class="row">
          <div class="col-md-1 pull-left prev"><a accesskey="p" href="installation.html">Prev</a></div>
          <div class="col-md-1 pull-right next"><a accesskey="n" href="adapters.html">Next</a></div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12">
        <div class="alert alert-info improve">Please <a href="https://github.com/sebastianfeldmann/phpbu-documentation/issues">open a ticket</a> on GitHub to suggest improvements to this page. Thanks!</div>
      </div>
    </div>
  </div>
  <div class="container">
    <hr/>
    <footer id="footer" class="clearfix">
      <p class="copyright"><a href="appendixes.copyright.html">Copyright</a> &copy; 2014 - 2019 Sebastian Feldmann.</p>
      <p class="social"><a href="https://twitter.com/phpbude" class="twitter" title="follow on twitter">follow on twitter</a></p>
    </footer>
  </div>

  <script src="js/jquery.min.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <script src="js/highlight.min.js"></script>
  <script type="text/javascript">
    $(document).ready(function() {
      $('pre.programlisting').each(function(i, e) {hljs.highlightBlock(e)});
    });

    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-59194092-1', 'auto');
    ga('send', 'pageview');
  </script>
 </body>
</html>
